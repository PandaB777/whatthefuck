!function(a,b,c){"use strict";function d(a){a="string"==typeof a?[a]:a||[],this.ranges=[];for(var b,c,d,e=0,f=a.length,g=new Date,h=g.getFullYear()+"/"+(g.getMonth()+1)+"/"+g.getDate();f>e;e++)b=a[e].replace(/\-/g,"/").split("~"),c=b[0],d=b[1]?b[1]:b[0],-1===c.indexOf(":")&&(c+=" 0:0:0"),-1===d.indexOf(":")&&(d+=" 0:0:0"),-1===c.indexOf("/")&&(c=h+" "+c),-1===d.indexOf("/")&&(d=h+" "+d),c=+this.parse(c),d=+this.parse(d),c>=d&&(d+=864e5),this.ranges[e]=[c,d]}function e(e){this.delay=e.delay?parseInt(e.delay,10):0,this.config=e,this.hideMainTimer=null;var h="sinaads_"+b.hash(a.location.host.split(".")[0]+a.location.pathname.substring(0,a.location.pathname.lastIndexOf("/")));this.key=h+(new d("2014-1-30 0:0:0~2014-1-30 11:59:59").check()?"_qrcode_sw":"_qrcode_xw");var i=this.main=new b.Box({width:g[0],height:g[1],position:"center bottom",follow:1,zIndex:10010}),j=this.mainContent=document.createElement("div");j.innerHTML=b.ad.createHTML(e.type[0],e.src[0],g[0],g[1],e.link[0],e.monitor);var k=this.mini=new b.Box({width:f[0],height:f[1],position:e.position||"left bottom",follow:1,zIndex:1e4,autoShow:1,minViewportWidth:e.minViewportWidth}),l=this.miniContent=document.createElement("div");if(l.innerHTML=b.ad.createHTML(e.type[1],e.src[1],f[0],f[1],e.link[1]||e.link[1],e.monitor),e.src&&e.src[1]){var m=new Image;m.src=e.src[1]}b.event.on(l,"mouseover",this.getShowMainHandler()),b.event.on(l,"mouseout",this.getHideMainHandler()),b.event.on(j,"mouseover",this.getMainOverHandler()),b.event.on(j,"mouseout",this.getHideMainHandler()),i.getMain().appendChild(j),k.getMain().appendChild(l);try{b.debug("Media: In building qrcode complete!"),c.done(c.qrcode)}catch(n){}}d.prototype={check:function(a){var b,c=this.ranges,d=0,e=c.length<=0;for(a=a?+this.parse(a):+new Date;!e&&(b=c[d++]);)e=a>=b[0]&&a<=b[1];return e},parse:function(a){var b=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof a){if(b.test(a)||isNaN(Date.parse(a))){var c=a.split(/ |T/),d=c.length>1?c[1].split(/[^\d]/):[0,0,0],e=c[0].split(/[^\d]/);return new Date(e[0]-0,e[1]-1,e[2]-0,d[0]-0,d[1]-0,d[2]-0)}return new Date(a)}return a}};var f=[170,230],g=[1e3,500],h=500;e.prototype={getMainOverHandler:function(){var a=this;return function(){a.hideMainTimer&&clearTimeout(a.hideMainTimer)}},getShowMainHandler:function(){var a=this;return function(){a.hideMainTimer&&clearTimeout(a.hideMainTimer);var c=b.storage.get(a.key);c=c?parseInt(c,10):0,c>=2||a.main.show()}},getHideMainHandler:function(){var a=this;return function(){a.hideMainTimer&&clearTimeout(a.hideMainTimer),a.hideMainTimer=setTimeout(function(){var c=b.storage.get(a.key);c=c?parseInt(c,10):0,b.storage.set(a.key,++c,864e5),a.main.hide()},h)}}},b.QrcodeMedia=b.QrcodeMedia||e}(window,window.sinaadToolkit,window.sinaadsROC);