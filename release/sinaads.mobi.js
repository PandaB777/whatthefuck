(function(e,t){var n=e.sinaadToolkit=e.sinaadToolkit||{TOOLKIT_URL:"http://d1.sina.com.cn/litong/zhitou/sinaads/src/core.js",now:function(){return(new Date).getTime()},rnd:function(){return Math.floor(Math.random()*2147483648).toString(36)},isFunction:function(e){return"[object Function]"==Object.prototype.toString.call(e)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)}};n.browser=n.browser||function(e){var n={android:/(Android)\s+([\d.]+)/i.test(e),ipad:/(iPad).*OS\s([\d_]+)/i.test(e),webos:/(webOS|hpwOS)[\s\/]([\d.]+)/i.test(e),kindle:/Kindle\/([\d.]+)/i.test(e),silk:/Silk\/([\d._]+)/i.test(e),blackberry:/(BlackBerry).*Version\/([\d.]+)/i.test(e),bb10:/(BB10).*Version\/([\d.]+)/i.test(e),rimtabletos:/(RIM\sTablet\sOS)\s([\d.]+)/i.test(e),playbook:/PlayBook/i.test(e),chrome:/chrome\/(\d+\.\d+)/i.test(e)?+RegExp.$1:t,firefox:/firefox\/(\d+\.\d+)/i.test(e)?+RegExp.$1:t,ie:/msie (\d+\.\d+)/i.test(e)?document.documentMode||+RegExp.$1:t,isGecko:/gecko/i.test(e)&&!/like gecko/i.test(e),isStrict:document.compatMode=="CSS1Compat",isWebkit:/webkit/i.test(e),opera:/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(e)?+(RegExp.$6||RegExp.$2):t};n.iphone=!n.ipad&&/(iPhone\sOS)\s([\d_]+)/i.test(e),n.touchpad=n.webos&&/TouchPad/.test(e),n.tablet=!!(n.ipad||n.playbook||n.android&&!/Mobile/.test(e)||n.firefox&&/Tablet/.test(e)),n.phone=!n.tablet&&!!(n.android||n.iphone||n.webos||n.blackberry||n.bb10||n.chrome&&/Android/.test(e)||n.chrome&&/CriOS\/([\d.]+)/.test(e)||n.firefox&&/Mobile/.test(e));try{/(\d+\.\d+)/.test(external.max_version)&&(n.maxthon=+RegExp.$1)}catch(r){}return n.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)?+(RegExp.$1||RegExp.$2):t,n.isSupportFixed=!n.ie||n.ie>=7,n}(navigator.userAgent),n.array=n.array={each:function(e,t,n){var r,i,s,o=e.length;if("function"==typeof t)for(s=0;s<o;s++){i=e[s],r=t.call(n||e,i,s);if(r===!1)break}return e}},n.string=n.string||function(){var e=/\uffff/.test("ï¿¿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;return{encodeHTML:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},decodeHTML:function(e){var t=String(e).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return t.replace(/&#([\d]+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})}}}(),n.object=n.object||{map:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}},n.cookie=n.cookie||{_isValidKey:function(e){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$')).test(e)},getRaw:function(e){if(n.cookie._isValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=t.exec(document.cookie);if(r)return r[2]||null}return null},setRaw:function(e,t,r){if(!n.cookie._isValidKey(e))return;r=r||{};var i=r.expires;"number"==typeof r.expires&&(i=new Date,i.setTime(i.getTime()+r.expires)),document.cookie=e+"="+t+(r.path?"; path="+r.path:"")+(i?"; expires="+i.toGMTString():"")+(r.domain?"; domain="+r.domain:"")+(r.secure?"; secure":"")},get:function(e){var t=n.cookie.getRaw(e);return"string"==typeof t?(t=decodeURIComponent(t),t):null},set:function(e,t,r){n.cookie.setRaw(e,encodeURIComponent(t),r)},remove:function(e,t){t=t||{},t.expires=new Date(0),baidu.cookie.setRaw(e,"",t)}},n.storage=n.storage||function(){var t={userData:null,name:location.hostname,init:function(){if(!t.userData)try{t.userData=document.createElement("INPUT"),t.userData.type="hidden",t.userData.style.display="none",t.userData.addBehavior("#default#userData"),document.body.appendChild(t.userData);var e=new Date;e.setDate(e.getDate()+365),t.userData.expires=e.toUTCString()}catch(n){return!1}return!0},setItem:function(e,n,r){t.init()&&(t.userData.load(t.name),t.userData.setAttribute(e,n),t.userData.save(t.name))},getItem:function(e){if(t.init())return t.userData.load(t.name),t.userData.getAttribute(e)},removeItem:function(e){t.init()&&(t.userData.load(t.name),t.userData.removeAttribute(e),t.userData.save(t.name))}},r={getItem:function(t){return e.localStorage.getItem(t)},setItem:function(t,r,i){e.localStorage.setItem(t,r+(i?";expires="+(n.now()+i):""))},removeItem:function(t){e.localStorage.removeItem(t)}},i={getItem:function(e){return n.cookie.get(e)},setItem:function(e,t,r){n.cookie.set(e,t,{expires:r||0})},removeItem:function(e){n.cookie.remove(e)}},s=n.browser.ie&&n.browser.id<8?userData:e.localStorage?r:i;return{get:function(e){var t=s.getItem(e);return t?(t=t.split(";"),t[1]&&n.now()>parseInt(t[1].split("=")[1],10)?(s.removeItem(e),null):t[0]):null},set:function(e,t,n){s.setItem(e,t,n)},remove:function(e){s.removeItem(e)}}}(),n.url=n.url||function(){return{createURL:function(e,t,n){return[n?"https":"http","://",e,t].join("")},top:function(){var t;try{t=e.top.location.href}catch(n){}return t||document.referrer||e.location.href}()}}(),n.sio=n.sio||function(){function t(e,t,n){e.setAttribute("type","text/javascript"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}function r(e){e&&e.parentNode&&e.parentNode.removeChild(e),e=null}return{loadScript:function(e,n,i){var s=document.createElement("SCRIPT"),o=0,u=i||{},a=u.charset,f=n||function(){},l=u.timeOut||0,c;s.onload=s.onreadystatechange=function(){if(o)return;var e=s.readyState;if("undefined"==typeof e||e=="loaded"||e=="complete"){o=1;try{f(),clearTimeout(c)}finally{s.onload=s.onreadystatechange=null,r(s)}}},l&&(c=setTimeout(function(){s.onload=s.onreadystatechange=null,r(s),u.onfailure&&u.onfailure()},l)),t(s,e,a)},jsonp:function(i,s,o){function y(t){return function(){try{t?c.onfailure&&c.onfailure():(s.apply(e,arguments),clearTimeout(v)),e[f]=null,delete e[f]}catch(n){}finally{r(u)}}}var u=document.createElement("SCRIPT"),a="_sinaads_cbs_",f,l,c=o||{},h=c.charset,p=c.queryField||"callback",d=c.timeOut||0,v,m=new RegExp("(\\?|&)"+p+"=([^&]*)"),g;if(n.isFunction(s))f=a+Math.floor(Math.random()*2147483648).toString(36),e[f]=y(0);else if(n.isString(s))f=s;else if(g=m.exec(i))f=g[2];d&&(v=setTimeout(y(1),d)),i=i.replace(m,"$1"+p+"="+f),i.search(m)<0&&(i+=(i.indexOf("?")<0?"?":"&")+p+"="+f),t(u,i,h)},log:function(t){var n=new Image,r="_sinaads_sio_log_"+Math.floor(Math.random()*2147483648).toString(36);e[r]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,e[r]=null,n=null},n.src=t}}}(),n.monitor=n.monitor||{parseTpl:function(e,t){var n=/\{__([a-zA-Z0-9]+(_*[a-zA-Z0-9])*)__\}/g;return function(e,t){return e?e.replace(n,function(e,n){return t[n]||e}):""}}(),createImpressMonitor:function(e){var t=[];return n.array.each(e,function(e,r){var i={};n.iframe.init(i,1,1,!1),i.src=e,i.style="display:none;",t.push(n.iframe.createHTML(i))}),t.join("")},createClickMonitor:function(e,t){if(!t)return;var t="string"==typeof t?[t]:t,r=[],i="";return n.array.each(t,function(t,n){var s="";if(t){switch(e){case"image":s="sinaadToolkit.sio.log('"+t+"')",i=";";break;default:}s&&r.push(s)}}),r.join(i)}},n.iframe=n.iframe||{init:function(e,t,n,r){var i=r?'"':"",s=i+"0"+i;e.width=i+t+i,e.height=i+n+i,e.frameborder=s,e.marginwidth=s,e.marginheight=s,e.vspace=s,e.hspace=s,e.allowtransparency=i+"true"+i,e.scrolling=i+"no"+i},createHTML:function(e){var t=[];return e.name=e.name||e.id,n.object.map(e,function(e,n){t.push(" "+n+'="'+(null==e?"":e)+'"')}),"<iframe"+t.join("")+"></iframe>"}},n.ad=n.ad||{createHTML:function(e,t,r,i,s,o){var u="",a,f;f=n.monitor.createClickMonitor(e,o);switch(e){case"image":u='<img border="0" src="'+t+'" style="width:100%;border:0" alt="'+t+'"/>',u=s?'<a href="'+s+'" target="'+(n.browser.phone?"_top":"_blank")+'"'+(f?' onclick="try{'+f+'}catch(e){}"':"")+">"+u+"</a>":u;break;case"text":u="<span>"+t+"</span>";break;default:}return u}};if(!n.seed){var r="sinaadtoolkit_seed";n.seed=parseInt(n.storage.get(r),10)||Math.floor(Math.random()*100),n.storage.set(r,n.seed>1e3?0:++n.seed)}})(window),function(e,t){function s(e){return/(^| )sinaads($| )/.test(e.className)&&"done"!==e.getAttribute("data-ad-status")}function o(e){var t=document.getElementsByTagName("ins"),n=0,r=t.length,i;for(i=t[n];n<r;i=t[++n])if(s(i)&&(!e||i.id===e))return i;return null}function u(e,t){e.innerHTML=['<ins style="margin:0px auto;display:block;">',t.pv,r.ad.createHTML(t.type,t.src,t.width,t.height,t.link,t.monitor),"</ind>"].join(""),e.style.cssText+=";display:block;overflow:hidden;"}function a(t){var i=t.element;t=t.params||{},i?(!s(i)&&(i=i.id&&o(i.id),!i),!("innerHTML"in i)):(i=o(),!i),i.setAttribute("data-ad-status","done"),t.sinaads_uid=e.sinaads_uid?++e.sinaads_uid:e.sinaads_uid=1;for(var a=i.attributes,f=a.length,l=0;l<f;l++){var c=a[l];if(/data-/.test(c.nodeName)){var h=c.nodeName.replace("data","sinaads").replace(/-/g,"_");t.hasOwnProperty(h)||(t[h]=c.nodeValue)}}var p=t.sinaads_page_url=t.sinaads_page_url||(e.top===e.self?e.document.URL:e.document.referrer),d=document.getElementsByTagName("head")[0].getElementsByTagName("meta"),v={keywords:"",template:"",entry:""};r.array.each(d,function(e,t){var n="",e=d[t];e.name.toLowerCase()==="keywords"?v.keywords+=","+e.content:e.name.toLowerCase()==="templateTargeting"&&(v.template+=","+e.conrent);if(n=r.cookie.get("sinaads_entry_targeting"))v.entry=n});var m=["adunitid="+t.sinaads_ad_pdps,"rotate_count="+r.seed,"TIMESTAMP="+r.now().toString(36),"referral="+encodeURIComponent(p),"tgkw="+(v.keywords?encodeURIComponent(v.keywords):""),"tgtpl="+(v.template?encodeURIComponent(v.template):""),"tgentry="+(v.entry?encodeURIComponent(v.entry):"")];r.sio.loadScript(n+"?"+m.join("&"),function(n){n=e._ssp_ad.data[t.sinaads_ad_pdps];if(!n||n==="nodata")return;var s=n.size.split("*"),o=t.sinaads_ad_width||(t.sinaads_ad_width=Number(s[0])),a=t.sinaads_ad_height||(t.sinaads_ad_height=Number(s[1])),f=o,l=a;n.content.src=n.content.src instanceof Array?n.content.src:n.content.src?[n.content.src]:[],n.content.link=n.content.link instanceof Array?n.content.link:n.content.link?[n.content.link]:[],n.content.type=n.content.type instanceof Array?n.content.type:n.content.type?[n.content.type]:[];var c=n.content.monitor=n.content.monitor instanceof Array?n.content.monitor:n.content.monitor?[dta.content.monitor]:[],h=n.content.pv=n.content.pv instanceof Array?n.content.pv:n.content.pv?[dta.content.pv]:[],p=n.mapUrl instanceof Array?n.mapUrl:n.mapUrl?[n.mapUrl]:[];r.array.each(h,function(e,n){h[n]=r.monitor.parseTpl(e,t)}),r.array.each(c,function(e,n){c[n]=r.monitor.parseTpl(e,t)}),u(i,{uid:t.sinaads_uid,pdps:t.sinaads_ad_pdps,pageurl:t.sinaads_page_url,width:o,height:a,type:n.content.type[0]||"html",src:n.content.src[0]||"",link:n.content.link[0]||"",monitor:c,pv:r.monitor.createImpressMonitor(h)||""});for(var d=0,v=p.length;d<v;d++)p[d]&&r.sio.log(p[d])})}var n="http://sax.sina.com.cn/impress.php",r=e.sinaadToolkit,i=r.now(),f=e.sinaads;if(f&&f.shift)for(var l,c=20;(l=f.shift())&&0<c--;)a(l);e.sinaads={push:a}}(window),window._ssp_ad={data:{},adapter:function(e){var t={1:"http://d3.sina.com.cn/litong/zhitou/union/tanx.html?pid=",2:"http://d3.sina.com.cn/litong/zhitou/union/google.html?pid="},n={},r=e.ad[0],i=r.value[0].content,s=i.type||[],o=i.src||[],u=r.size.split("*"),a=i.link||[];r.engineType==="network"&&(o=[t[""+r.value[0].manageType]+i+"&w="+u[0]+"&h="+u[1]],s=["url"]),r.engineType==="dsp"&&parseInt(r.value[0].manageType,10)!==17&&(o=[i],s=["html"]);for(var f=0,l=o.length;f<l;f++){var c;if(!s[f]){c=o[f].substring(o[f].length-3);switch(c){case"tml":s[f]="url";break;case"png":case"jpg":case"gif":case"bmp":s[f]="image";break;default:}}}return n.type=function(e){switch(e){case"bt":return"bp";case"kl":return"couplet";default:return"embed"}}(r.type),n.size=r.size,n.mapUrl=e.mapUrl,n.content={src:o instanceof Array?o:[o],link:a instanceof Array?a:[a],pv:i.pv||[],type:s,monitor:i.monitor||[]},n},callback:function(e){if(e==="nodata"||e.ad&&e.ad[0]&&(!e.ad[0].value||e.ad[0].value&&e.ad[0].value.length<=0))return;window._ssp_ad.data[e.ad[0].id]=window._ssp_ad.adapter(e)}}